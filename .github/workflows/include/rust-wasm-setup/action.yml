name: Rust Wasm Setup

inputs:
  toolchain:
    description: "Rust toolchain version"
    required: true
    type: string
    default: "nightly"

runs:
  using: "composite"
  steps:
    - name: Setup Rust toolchain
      uses: dtolnay/rust-toolchain@nightly
      with:
        toolchain: ${{ inputs.toolchain }}
        targets: "wasm32-unknown-unknown"
        components: "rust-std"

    - name: Install wasm-bindgen-cli
      shell: bash
      run: cargo install wasm-bindgen-cli

    - name: Install bc
      shell: bash
      run: sudo apt update && sudo apt-get install -y bc
