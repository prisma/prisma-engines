---
source: query-compiler/query-compiler/tests/queries.rs
expression: pretty
input_file: query-compiler/query-compiler/tests/data/query-non-unique-one2m-pagination.json
---
dataMap {
    id: Int (id)
    email: String (email)
    role: Enum<Role> (role)
    posts (from @nested$posts): {
        id: Int (id)
    }
}
enums {
    Role: {
        admin: ADMIN
        user: USER
    }
}
let @parent = query «SELECT "public"."User"."id", "public"."User"."email",
                     "public"."User"."role"::text FROM "public"."User" WHERE
                     "public"."User"."id" = $1 OFFSET $2»
              params [const(BigInt(1)), const(BigInt(0))]
in let @parent$id = mapField id (get @parent)
   in join (get @parent)
      with (skip 10
           take 10
           query «SELECT "public"."Post"."id", "public"."Post"."userId" FROM
                  "public"."Post" WHERE "public"."Post"."userId" IN [$1] ORDER
                  BY "public"."Post"."id" ASC OFFSET $2»
           params [var(@parent$id as Int),
                   const(BigInt(0))]) on left.(id) = right.(userId) as @nested$posts
